@model InmobiliariaApp.Models.Contrato

@{
    ViewData["Title"] = "Detalles del Contrato";
}
@if (TempData["Msg"] != null)
{
    <div class="alert alert-info">@TempData["Msg"]</div>
}

<h1>Detalles</h1>

<dl class="row">
    <dt class="col-sm-2">Inmueble</dt>
    <dd class="col-sm-10">@Model.Inmueble?.Direccion</dd>

    <dt class="col-sm-2">Inquilino</dt>
    <dd class="col-sm-10">@Model.Inquilino?.NombreCompleto</dd>

    <dt class="col-sm-2">Fecha Inicio</dt>
    <dd class="col-sm-10">@Model.FechaInicio.ToShortDateString()</dd>

    <dt class="col-sm-2">Fecha Fin</dt>
    <dd class="col-sm-10">@Model.FechaFin.ToShortDateString()</dd>

    <dt class="col-sm-2">Monto Mensual</dt>
    <dd class="col-sm-10">@Model.MontoMensual.ToString("C")</dd>
</dl>

@if (User.IsInRole("Administrador"))
{
    <h3>Auditoría</h3>
    <dl class="row">
        <dt class="col-sm-2">Creado por</dt>
        <dd class="col-sm-10">@Model.CreadoPor</dd>

        @if (!string.IsNullOrEmpty(Model.TerminadoPor))
        {
            <dt class="col-sm-2">Terminado por</dt>
            <dd class="col-sm-10">@Model.TerminadoPor</dd>
        }
    </dl>
}

<a asp-action="Edit" asp-route-id="@Model.IdContrato" class="btn btn-warning">✏ Editar</a>
<a asp-action="Delete" asp-route-id="@Model.IdContrato" class="btn btn-danger">🗑 Eliminar</a>
<a asp-action="Index" class="btn btn-secondary">⬅ Volver</a>
<div class="mt-3">
    <a asp-controller="Pagos"
       asp-action="Create"
       asp-route-idContrato="@Model.IdContrato"
       class="btn btn-success">
        ➕ Agregar pago a este contrato
    </a>

    <a asp-controller="Pagos"
        asp-action="PorContrato" 
        asp-route-idContrato="@Model.IdContrato" 
        class="btn btn-success">
        💰 Ver pagos
   </a>
</div>
<div class="mt-3">
    <a asp-action="Renovar" asp-route-id="@Model.IdContrato" class="btn btn-outline-primary">
        🔁 Renovar contrato
    </a>

    <a asp-action="TerminarAnticipado" asp-route-id="@Model.IdContrato" class="btn btn-outline-danger">
        ⛔ Terminar anticipadamente
    </a>
</div>
